def validate_agent_data(agent_data):
    if agent_data is None:
        return False, None

    # validate that the allowlist is proper JSON
    lists = json.loads(agent_data['allowlist'])

    # Validate exlude list contains valid regular expressions
    is_valid, _, err_msg = config.valid_exclude_list(lists.get('exclude'))
    if not is_valid:
        err_msg += " Exclude list regex is misformatted. Please correct the issue and try again."

    return is_valid, err_msg

def countSubIslands(self, grid1, grid2):
    """
    :type grid1: List[List[int]]
    :type grid2: List[List[int]]
    :rtype: int
    """
    directions = [(0, 1), (1, 0), (0, -1), (-1, 0)]
    def dfs(grid1, grid2, i, j):
        if not (0 <= i < len(grid2) and
                0 <= j < len(grid2[0]) and
                grid2[i][j] == 1):
            return 1
        grid2[i][j] = 0
        result = grid1[i][j]
        for di, dj in directions:
            result &= dfs(grid1, grid2, i+di, j+dj)
        return result
        
    return sum(dfs(grid1, grid2, i, j) for i in xrange(len(grid2)) for j in xrange(len(grid2[0])) if grid2[i][j])


